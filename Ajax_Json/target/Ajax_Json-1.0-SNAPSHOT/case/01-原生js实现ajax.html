<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        
        //定义方法
        function  fun() {
            //发送异步请求
            //1.创建核心对象
            var xmlhttp;
            //如果浏览器支持 window.XMLHttpRequest，则创建一个新的 XMLHttpRequest 对象，
            // 否则使用老版本的 ActiveXObject("Microsoft.XMLHTTP") 来创建对象。
            // 这是为了确保在不同的浏览器上都能够正常工作。
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            //2. 建立连接
            /*
                参数：
                    1. 请求方式：GET、POST
                        * get方式，请求参数在URL后边拼接。send方法为空参
                        * post方式，请求参数在send方法中定义
                    2. 请求的URL：
                    3. 同步或异步请求：true（异步）或 false（同步）

             */
            xmlhttp.open("GET","../AjaxDemo1?username=tom",false);
            //使用 xmlhttp.open() 方法来建立与服务器的连接。这个方法接受三个参数：
            //请求方式（GET 或 POST）：这里是 GET 请求。
            // 请求的 URL：这是要发送请求的服务器端地址，通常是一个相对或绝对路径。
            // 同步或异步请求：这里设置为 true，表示使用异步请求。
            // 异步请求允许浏览器继续执行其他任务，而不必等待服务器响应。

            //3.发送请求
            xmlhttp.send();
            //使用 xmlhttp.send() 方法来发送请求。
            // 在 GET 请求中，请求参数通常会附加在 URL 后面（在这个示例中是 "?username=tom"），
            // 而在 POST 请求中，请求参数通常在 send 方法中定义。



            //4.接受并处理来自服务器的响应结果
            //获取方式 ：xmlhttp.responseText
            //什么时候获取？当服务器响应成功后再获取

            //当xmlhttp对象的就绪状态改变时，触发事件onreadystatechange。
            xmlhttp.onreadystatechange=function()
            //xmlhttp.onreadystatechange 是 XMLHttpRequest 对象的一个事件处理属性，
           // 它允许你指定一个 JavaScript 函数，以在 XMLHttpRequest 对象的 readyState 属性发生变化时触发。
           // 这个事件处理函数通常用于监视 AJAX 请求的状态变化并根据不同的状态执行相应的操作。

            //XMLHttpRequest 对象的 readyState 属性表示请求的当前状态，它有以下几个可能的值：
            //
            // 0：请求还没有初始化（open 方法还没有被调用）。
            // 1：服务器连接已建立，但请求还没有被发送。
            // 2：请求已发送，send 方法已被调用，但响应还没有接收。
            // 3：部分响应数据已经接收，但响应还没有完成。
            // 4：响应已完成，可以访问并使用响应数据。
            {
                //判断readyState就绪状态是否为4，判断status响应状态码是否为200
                if (xmlhttp.readyState===4 && xmlhttp.status===200)
                {
                   //获取服务器的响应结果
                    var responseText = xmlhttp.responseText;
                    alert(responseText);
                }
            }

        }
        
    </script>
    
    
</head>
<body>

    <input type="button" value="发送异步请求" onclick="fun();">

    <input>
</body>
</html>